! =============================================================
! MANAGED SWITCH CONFIGURATION
! Device: Cisco Catalyst 2960 (or equivalent in Packet Tracer)
! Purpose: VLAN segmentation, Port Security, DHCP Snooping
! =============================================================

! ----- BASIC DEVICE SETUP -----

enable
configure terminal

hostname LabSwitch
no ip domain-lookup
enable secret class
line console 0
 password cisco
 login
line vty 0 15
 password cisco
 login
 transport input ssh
service password-encryption
banner motd # Authorized Access Only. All activity is logged. #


! ----- VLAN CREATION -----
! Segments the network so different groups of users are isolated
! from each other at Layer 2.

vlan 10
 name Lab_Workstations
vlan 20
 name Administration
vlan 99
 name Management


! ----- TRUNK PORT (to Edge Router) -----
! This is the uplink to the router. It carries tagged traffic
! from all VLANs.

interface GigabitEthernet0/1
 description Trunk to Edge Router
 switchport mode trunk
 switchport trunk allowed vlan 10,20,99
 switchport trunk native vlan 99
 no shutdown


! ----- ACCESS PORTS FOR LAB WORKSTATIONS (VLAN 10) -----
! Solves Problem 3: Unauthorized device access.
!
! Port Security (sticky MAC): Each port automatically learns the
! MAC address of the first device connected to it and locks it in.
! If a different device is plugged in, the port shuts down immediately.
!
! This configuration is applied to ports Fa0/1 through Fa0/50,
! one for each of the 50 workstations.

interface range FastEthernet0/1 - 24
 description Lab Workstations
 switchport mode access
 switchport access vlan 10
 switchport port-security
 switchport port-security maximum 1
 switchport port-security mac-address sticky
 switchport port-security violation shutdown
 spanning-tree portfast
 no shutdown

interface range FastEthernet0/25 - 48
 description Lab Workstations (continued)
 switchport mode access
 switchport access vlan 10
 switchport port-security
 switchport port-security maximum 1
 switchport port-security mac-address sticky
 switchport port-security violation shutdown
 spanning-tree portfast
 no shutdown


! ----- ADMINISTRATION ACCESS PORTS (VLAN 20) -----
! A few ports are reserved for staff machines.

interface range GigabitEthernet0/2 - 2
 description Admin Staff Machine
 switchport mode access
 switchport access vlan 20
 switchport port-security
 switchport port-security maximum 1
 switchport port-security mac-address sticky
 switchport port-security violation shutdown
 spanning-tree portfast
 no shutdown


! ----- DHCP SNOOPING -----
! Prevents rogue DHCP servers from handing out false IP configurations.
! Only the trunk port (connected to the legitimate router/DHCP server)
! is marked as trusted. All workstation-facing ports are untrusted
! by default, meaning they cannot send DHCP server responses.

ip dhcp snooping
ip dhcp snooping vlan 10,20

interface GigabitEthernet0/1
 ip dhcp snooping trust


! ----- UNUSED PORT HARDENING -----
! Any ports not assigned to a workstation or admin machine are
! shut down to prevent unauthorized physical connections.

! (Apply this to any unused ports on the switch)
! interface range FastEthernet0/49 - 48
!  shutdown


! ----- MANAGEMENT VLAN INTERFACE -----
! Allows remote SSH access to the switch for administration.

interface vlan 99
 ip address 192.168.99.2 255.255.255.0
 no shutdown

ip default-gateway 192.168.99.1


! ----- SAVE CONFIGURATION -----

end
write memory
